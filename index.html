<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <title>Bit Sound Machine</title>
    <style>
        /* Estilo Simples e Objetivo */
        body { font-family: monospace; background: #121212; color: #00ff00; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; margin: 0; }
        .grid { display: grid; grid-template-columns: repeat(4, 100px); gap: 15px; margin-top: 20px; }
        
        .pad {
            width: 100px; height: 100px; border: 2px solid #00ff00;
            display: flex; align-items: center; justify-content: center;
            cursor: pointer; font-weight: bold; transition: 0.2s;
        }

        /* Classe para quando o botão está "Ligado" */
        .pad.active { background: #00ff00; color: #121212; box-shadow: 0 0 15px #00ff00; }
        
        .controls { margin-bottom: 20px; text-align: center; }
        .status { margin-top: 20px; font-size: 0.9em; color: #888; }
    </style>
</head>
<body>

    <div class="controls">
        <h1>BIT SOUND BOX</h1>
        <p>Clique para Ativar/Desativar | Use o Teclado para Tocar</p>
    </div>

    <div class="grid">
        <div class="pad" data-key="a" data-freq="261.63">A</div>
        <div class="pad" data-key="s" data-freq="293.66">S</div>
        <div class="pad" data-key="d" data-freq="329.63">D</div>
        <div class="pad" data-key="f" data-freq="349.23">F</div>
    </div>

    <p class="status">Modo: Musical (Teclado Ativo)</p>

    <script>
        // 1. Configuração do Áudio (Web Audio API)
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

        function playBitSound(frequency) {
            const oscillator = audioCtx.createOscillator();
            const gainNode = audioCtx.createGain();

            oscillator.type = 'square'; // Som tipo "bit" (quadrado)
            oscillator.frequency.setValueAtTime(frequency, audioCtx.currentTime);
            
            gainNode.gain.setValueAtTime(0.1, audioCtx.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.0001, audioCtx.currentTime + 0.5);

            oscillator.connect(gainNode);
            gainNode.connect(audioCtx.destination);

            oscillator.start();
            oscillator.stop(audioCtx.currentTime + 0.5);
        }

        // 2. Interação com Rato (Liga/Desliga)
        const pads = document.querySelectorAll('.pad');
        pads.forEach(pad => {
            pad.addEventListener('click', () => {
                pad.classList.toggle('active');
                if(pad.classList.contains('active')) {
                    playBitSound(parseFloat(pad.dataset.freq));
                }
            });
        });

        // 3. Interação com Teclado
        window.addEventListener('keydown', (e) => {
            const key = e.key.toLowerCase();
            pads.forEach(pad => {
                // Só toca se a tecla coincidir E o botão estiver "LIGADO" (active)
                if (pad.dataset.key === key && pad.classList.contains('active')) {
                    playBitSound(parseFloat(pad.dataset.freq));
                    
                    // Efeito visual rápido ao tocar
                    pad.style.transform = "scale(1.1)";
                    setTimeout(() => pad.style.transform = "scale(1)", 100);
                }
            });
        });
    </script>
</body>
</html>
